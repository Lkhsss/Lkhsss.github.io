{
    "version": "https://jsonfeed.org/version/1",
    "title": "LKHSS的Blog • All posts by \"数据库\" category",
    "description": "嗨嗨嗨",
    "home_page_url": "https://lkhsss.github.io",
    "items": [
        {
            "id": "https://lkhsss.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/mysql%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99%E9%83%A8%E5%88%86%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/",
            "url": "https://lkhsss.github.io/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/mysql%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99%E9%83%A8%E5%88%86%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/",
            "title": "MySQL安装报错部分解决方案",
            "date_published": "2023-04-08T10:58:34.000Z",
            "content_html": "<h2 id=\"1-ERROR-1698-28000-Access-denied-for-user-root-localhost\">1.<code>ERROR 1698 (28000): Access denied for user 'root'@'localhost'</code></h2>\n<p>一般出现这种情况多数是安装新版本mysql，root密码是随机的，也不是空密码，所以要通过查看随机密码进入，再进行修改原来的密码。</p>\n<h3 id=\"解决方案\">解决方案</h3>\n<h4 id=\"1-查看内置用户的随机密码\">1.查看内置用户的随机密码</h4>\n<p>下载安装MySQL的过程中，系统会自动给我们创建一个用户，我们借助如下指令便可以查看该用户信息：</p>\n<p><code>sudo cat /etc/mysql/debian.cnf</code></p>\n<p>返回：</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">❯ sudo cat &#x2F;etc&#x2F;mysql&#x2F;debian.cnf\n# Automatically generated for Debian scripts. DO NOT TOUCH!\n[client]\nhost     &#x3D; localhost\nuser     &#x3D; debian-sys-maint\npassword &#x3D; R4ZiuvNnNykAuP9N\nsocket   &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock\n[mysql_upgrade]\nhost     &#x3D; localhost\nuser     &#x3D; debian-sys-maint\npassword &#x3D; R4ZiuvNnNykAuP9N\nsocket   &#x3D; &#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.sock</code></pre></div></figure>\n<h4 id=\"2-进入MySQL\">2.进入MySQL</h4>\n<p>然后使用<code>debian-sys-maint</code>和<code>R4ZiuvNnNykAuP9N</code>(看<code>password</code>那一行，这个是随机生成的，我的和你的不一样)<strong>进入MySQL</strong>：</p>\n<p><code>mysql -u debian-sys-maint -p</code></p>\n<p>在显示<code>Enter password:</code>之后输入<code>password</code>那一行后面的密码，此时密码不会显示（<s>copy下来就对了</s></p>\n<h4 id=\"3-修改root账户密码\">3.修改root账户密码</h4>\n<p>先查看一下原来的用户表：</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">use mysql;\nselect user,plugin from user;</code></pre></div></figure>\n<p>输出：</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">mysql&gt; use mysql;\nt user,plugin from user;Reading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql&gt; select user,plugin from user;\n+------------------+-----------------------+\n| user             | plugin                |\n+------------------+-----------------------+\n| lkhsss           | caching_sha2_password |\n| debian-sys-maint | caching_sha2_password |\n| mysql.infoschema | caching_sha2_password |\n| mysql.session    | caching_sha2_password |\n| mysql.sys        | caching_sha2_password |\n| root             | auth_socket           |\n+------------------+-----------------------+\n6 rows in set (0.00 sec)</code></pre></div></figure>\n<p>可以看到root账户的密码格式为<code>auth_socket </code>。</p>\n<p>现在来修改一下root账户的密码格式:</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">update user set plugin&#x3D;&#39;mysql_native_password&#39; where user&#x3D;&#39;root&#39;; # 修改其密码格式\nselect user,plugin from user; # 查询其用户</code></pre></div></figure>\n<p>输出：</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">mysql&gt; update user set plugin&#x3D;&#39;mysql_native_password&#39; where user&#x3D;&#39;root&#39;;\nQuery OK, 0 rows affected (0.00 sec)\nRows matched: 1  Changed: 0  Warnings: 0\n\nmysql&gt; select user,plugin from user;\n+------------------+-----------------------+\n| user             | plugin                |\n+------------------+-----------------------+\n| lkhsss           | caching_sha2_password |\n| debian-sys-maint | caching_sha2_password |\n| mysql.infoschema | caching_sha2_password |\n| mysql.session    | caching_sha2_password |\n| mysql.sys        | caching_sha2_password |\n| root             | mysql_native_password |\n+------------------+-----------------------+\n6 rows in set (0.00 sec)</code></pre></div></figure>\n<p>修改好后要刷新权限</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">flush privileges;</code></pre></div></figure>\n<p>然后新增密码：</p>\n<p><code>alter user 'root'@'localhost' identified by '密码';</code></p>\n<p>再刷新一次</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">flush privileges;</code></pre></div></figure>\n<p>退出</p>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">exit</code></pre></div></figure>\n<h4 id=\"4-重启服务\">4.重启服务</h4>\n<figure><div class=\"code-wrapper\"><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">service mysql restart</code></pre></div></figure>\n<p>现在即可用<code>mysql -u root -p</code>，然后使用刚刚设置的密码登陆了</p>\n",
            "tags": [
                "数据库",
                "MySQL",
                "解决方案"
            ]
        }
    ]
}